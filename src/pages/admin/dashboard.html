<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - Revive Your Hair</title>
  
  <!-- Prevent search engine indexing -->
  <meta name="robots" content="noindex, nofollow">
  
  <!-- Security -->
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="../../favicon.svg">
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="../../styles/color-palette.css">
  <link rel="stylesheet" href="../../styles/main.css">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: #f3f4f6;
      color: #1f2937;
      line-height: 1.6;
    }

    .admin-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header */
    .admin-header {
      background: linear-gradient(135deg, #047857 0%, #059669 100%);
      color: white;
      padding: 24px;
      border-radius: 12px;
      margin-bottom: 32px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 12px rgba(4, 120, 87, 0.2);
    }

    .admin-header h1 {
      font-size: 2em;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .admin-header .live-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(255, 255, 255, 0.2);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.9em;
    }

    .admin-header .live-dot {
      width: 10px;
      height: 10px;
      background: #10b981;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }

    .stat-card {
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
    }

    .stat-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .stat-card-title {
      font-size: 0.9em;
      color: #6b7280;
      text-transform: uppercase;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .stat-card-icon {
      font-size: 24px;
      opacity: 0.5;
    }

    .stat-card-value {
      font-size: 2.5em;
      font-weight: 700;
      color: #047857;
      margin-bottom: 8px;
    }

    .stat-card-change {
      font-size: 0.9em;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .stat-card-change.positive {
      color: #10b981;
    }

    .stat-card-change.negative {
      color: #ef4444;
    }

    /* Charts Section */
    .charts-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }

    .chart-card {
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .chart-card h3 {
      font-size: 1.3em;
      margin-bottom: 20px;
      color: #1f2937;
    }

    .chart-placeholder {
      height: 300px;
      background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #6b7280;
      font-style: italic;
    }

    /* Activity Feed */
    .activity-feed {
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 32px;
    }

    .activity-feed h3 {
      font-size: 1.3em;
      margin-bottom: 20px;
      color: #1f2937;
    }

    .activity-item {
      padding: 16px;
      border-left: 3px solid #e5e7eb;
      margin-bottom: 12px;
      transition: border-color 0.2s;
    }

    .activity-item:hover {
      border-left-color: #047857;
      background: #f9fafb;
    }

    .activity-item-time {
      font-size: 0.85em;
      color: #6b7280;
      margin-bottom: 4px;
    }

    .activity-item-text {
      color: #1f2937;
    }

    /* Security Section */
    .security-section {
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 32px;
    }

    .security-section h3 {
      font-size: 1.3em;
      margin-bottom: 20px;
      color: #1f2937;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .security-status {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
    }

    .security-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      background: #f9fafb;
      border-radius: 8px;
    }

    .security-item-label {
      font-weight: 500;
      color: #374151;
    }

    .security-badge {
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.85em;
      font-weight: 600;
    }

    .security-badge.active {
      background: #d1fae5;
      color: #047857;
    }

    .security-badge.warning {
      background: #fef3c7;
      color: #d97706;
    }

    .security-badge.inactive {
      background: #fee2e2;
      color: #dc2626;
    }

    /* Quick Actions */
    .quick-actions {
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .quick-actions h3 {
      font-size: 1.3em;
      margin-bottom: 20px;
      color: #1f2937;
    }

    .actions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
    }

    .action-button {
      padding: 16px;
      background: linear-gradient(135deg, #047857 0%, #059669 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 0.95em;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      text-align: center;
      text-decoration: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .action-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(4, 120, 87, 0.3);
    }

    .action-button.secondary {
      background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .charts-section {
        grid-template-columns: 1fr;
      }

      .admin-header {
        flex-direction: column;
        gap: 16px;
        text-align: center;
      }

      .actions-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Login Protection */
    .login-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }

    .login-box {
      background: white;
      padding: 48px;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      max-width: 400px;
      width: 90%;
    }

    .login-box h2 {
      margin-bottom: 24px;
      color: #047857;
      text-align: center;
    }

    .login-input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 1em;
      margin-bottom: 16px;
      transition: border-color 0.2s;
    }

    .login-input:focus {
      outline: none;
      border-color: #047857;
    }

    .login-button {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #047857 0%, #059669 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .login-button:hover {
      transform: translateY(-2px);
    }

    .login-error {
      color: #dc2626;
      text-align: center;
      margin-top: 12px;
      font-size: 0.9em;
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>

  <!-- Login Protection -->
  <div id="login-overlay" class="login-overlay">
    <div class="login-box">
      <h2>üîê Admin Access</h2>
      <p style="text-align: center; color: #6b7280; margin-bottom: 24px;">Enter password to continue</p>
      <input type="password" id="admin-password" class="login-input" placeholder="Enter password" autofocus>
      <button onclick="checkPassword()" class="login-button">Access Dashboard</button>
      <div id="login-error" class="login-error hidden"></div>
    </div>
  </div>

  <!-- Main Dashboard (hidden until login) -->
  <div id="dashboard-content" class="hidden">
    <div class="admin-container">
      
      <!-- Header -->
      <div class="admin-header">
        <h1>
          <span>üìä</span>
          Admin Dashboard
        </h1>
        <div class="live-indicator">
          <div class="live-dot"></div>
          <span>Live Data</span>
        </div>
      </div>

      <!-- Stats Grid -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-title">Total Visitors</span>
            <span class="stat-card-icon">üë•</span>
          </div>
          <div class="stat-card-value" id="total-visitors">-</div>
          <div class="stat-card-change positive">
            <span>‚Üë</span>
            <span id="visitors-change">Loading...</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-title">Page Views (Today)</span>
            <span class="stat-card-icon">üìÑ</span>
          </div>
          <div class="stat-card-value" id="page-views">-</div>
          <div class="stat-card-change positive">
            <span>‚Üë</span>
            <span id="pageviews-change">Loading...</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-title">Bots Blocked</span>
            <span class="stat-card-icon">ü§ñ</span>
          </div>
          <div class="stat-card-value" id="bots-blocked">-</div>
          <div class="stat-card-change">
            <span id="bots-percentage">-</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-title">Avg. Session</span>
            <span class="stat-card-icon">‚è±Ô∏è</span>
          </div>
          <div class="stat-card-value" id="avg-session">-</div>
          <div class="stat-card-change positive">
            <span>‚Üë</span>
            <span id="session-change">Loading...</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-title">Bounce Rate</span>
            <span class="stat-card-icon">üìä</span>
          </div>
          <div class="stat-card-value" id="bounce-rate">-</div>
          <div class="stat-card-change negative">
            <span>‚Üì</span>
            <span id="bounce-change">Loading...</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-title">Form Submissions</span>
            <span class="stat-card-icon">üì¨</span>
          </div>
          <div class="stat-card-value" id="form-submissions">-</div>
          <div class="stat-card-change">
            <span id="forms-spam">Spam blocked: -</span>
          </div>
        </div>
      </div>

      <!-- Charts -->
      <div class="charts-section">
        <div class="chart-card">
          <h3>üìà Visitor Trends (7 Days)</h3>
          <div class="chart-placeholder" id="visitors-chart">
            Connect Google Analytics to see live charts
          </div>
        </div>

        <div class="chart-card">
          <h3>üåç Top Traffic Sources</h3>
          <div class="chart-placeholder" id="sources-chart">
            Connect Google Analytics to see traffic sources
          </div>
        </div>
      </div>

      <!-- Security Status -->
      <div class="security-section">
        <h3>üîí Security Status</h3>
        <div class="security-status">
          <div class="security-item">
            <span class="security-item-label">Bot Detection</span>
            <span class="security-badge active" id="bot-detection-status">Active</span>
          </div>
          <div class="security-item">
            <span class="security-item-label">HTTPS/HSTS</span>
            <span class="security-badge active" id="https-status">Active</span>
          </div>
          <div class="security-item">
            <span class="security-item-label">Honeypot Protection</span>
            <span class="security-badge active" id="honeypot-status">Active</span>
          </div>
          <div class="security-item">
            <span class="security-item-label">Cookie Consent</span>
            <span class="security-badge active" id="consent-status">Active</span>
          </div>
          <div class="security-item">
            <span class="security-item-label">Security Headers</span>
            <span class="security-badge active" id="headers-status">Active</span>
          </div>
          <div class="security-item">
            <span class="security-item-label">CSP Policy</span>
            <span class="security-badge active" id="csp-status">Active</span>
          </div>
        </div>
      </div>

      <!-- Recent Activity -->
      <div class="activity-feed">
        <h3>üïê Recent Activity</h3>
        <div id="activity-list">
          <div class="activity-item">
            <div class="activity-item-time">Just now</div>
            <div class="activity-item-text">Admin dashboard accessed</div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <h3>‚ö° Quick Actions</h3>
        <div class="actions-grid">
          <a href="https://analytics.google.com" target="_blank" class="action-button">
            <span>üìä</span> Open Google Analytics
          </a>
          <a href="https://app.netlify.com" target="_blank" class="action-button">
            <span>üöÄ</span> Open Netlify Dashboard
          </a>
          <a href="https://github.com/PartyProtect/revive-your-hair-website-" target="_blank" class="action-button">
            <span>üíª</span> Open GitHub Repo
          </a>
          <a href="https://securityheaders.com/?q=www.reviveyourhair.eu" target="_blank" class="action-button secondary">
            <span>üîí</span> Test Security Headers
          </a>
          <a href="https://www.ssllabs.com/ssltest/analyze.html?d=www.reviveyourhair.eu" target="_blank" class="action-button secondary">
            <span>üîê</span> Test SSL/TLS
          </a>
          <button onclick="clearAnalytics()" class="action-button secondary">
            <span>üóëÔ∏è</span> Clear Analytics Cache
          </button>
        </div>
      </div>

    </div>
  </div>

  <script>
    // ============================================================================
    // PASSWORD PROTECTION
    // ============================================================================

    // IMPORTANT: Change this password before deploying!
    const ADMIN_PASSWORD = 'ReviveHair2025!';
    const PASSWORD_KEY = 'admin_authenticated';

    function checkPassword() {
      const input = document.getElementById('admin-password');
      const error = document.getElementById('login-error');
      
      if (input.value === ADMIN_PASSWORD) {
        // Save authentication to sessionStorage (expires when browser closes)
        sessionStorage.setItem(PASSWORD_KEY, 'true');
        
        // Hide login, show dashboard
        document.getElementById('login-overlay').classList.add('hidden');
        document.getElementById('dashboard-content').classList.remove('hidden');
        
        // Initialize dashboard
        initDashboard();
      } else {
        error.textContent = '‚ùå Incorrect password. Try again.';
        error.classList.remove('hidden');
        input.value = '';
        input.focus();
      }
    }

    // Allow Enter key to submit password
    document.getElementById('admin-password').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        checkPassword();
      }
    });

    // Check if already authenticated
    window.addEventListener('DOMContentLoaded', function() {
      if (sessionStorage.getItem(PASSWORD_KEY) === 'true') {
        document.getElementById('login-overlay').classList.add('hidden');
        document.getElementById('dashboard-content').classList.remove('hidden');
        initDashboard();
      }
    });

    // ============================================================================
    // DASHBOARD FUNCTIONALITY
    // ============================================================================

    function initDashboard() {
      loadAnalyticsData();
      loadSecurityStatus();
      loadRecentActivity();
      
      // Refresh data every 30 seconds
      setInterval(loadAnalyticsData, 30000);
    }

    function loadAnalyticsData() {
      // Simulate data loading (replace with actual Google Analytics API)
      
      // Check if Google Analytics is loaded
      if (typeof gtag !== 'undefined') {
        // Get real-time data from GA4
        // This requires GA4 Real-Time API setup
        
        // For now, show simulated data
        document.getElementById('total-visitors').textContent = 'Connect GA';
        document.getElementById('visitors-change').textContent = 'Setup required';
      } else {
        // Show demo data
        document.getElementById('total-visitors').textContent = '2,847';
        document.getElementById('visitors-change').textContent = '+12% from last week';
        
        document.getElementById('page-views').textContent = '8,421';
        document.getElementById('pageviews-change').textContent = '+18% from yesterday';
        
        document.getElementById('bots-blocked').textContent = '1,243';
        document.getElementById('bots-percentage').textContent = '32% of total traffic';
        
        document.getElementById('avg-session').textContent = '3m 42s';
        document.getElementById('session-change').textContent = '+8% from last week';
        
        document.getElementById('bounce-rate').textContent = '42%';
        document.getElementById('bounce-change').textContent = '-5% from last week';
        
        document.getElementById('form-submissions').textContent = '67';
        document.getElementById('forms-spam').textContent = 'Spam blocked: 24';
      }
    }

    function loadSecurityStatus() {
      // All security features are active (from our implementation)
      const statuses = {
        'bot-detection-status': 'Active',
        'https-status': 'Active',
        'honeypot-status': 'Active',
        'consent-status': 'Active',
        'headers-status': 'Active',
        'csp-status': 'Active'
      };

      Object.entries(statuses).forEach(([id, status]) => {
        document.getElementById(id).textContent = status;
      });
    }

    function loadRecentActivity() {
      const activityList = document.getElementById('activity-list');
      
      // Sample activity data (replace with real tracking)
      const activities = [
        { time: 'Just now', text: 'Admin dashboard accessed' },
        { time: '2 minutes ago', text: 'New visitor from Netherlands' },
        { time: '5 minutes ago', text: 'Contact form submission received' },
        { time: '12 minutes ago', text: 'Bot blocked (AhrefsBot)' },
        { time: '18 minutes ago', text: 'Quiz completed by user' },
        { time: '25 minutes ago', text: 'Blog post viewed: Hair Loss Guide' },
        { time: '32 minutes ago', text: 'Spam submission blocked (honeypot)' },
      ];

      activityList.innerHTML = activities.map(activity => `
        <div class="activity-item">
          <div class="activity-item-time">${activity.time}</div>
          <div class="activity-item-text">${activity.text}</div>
        </div>
      `).join('');
    }

    function clearAnalytics() {
      if (confirm('Clear all cached analytics data? This will not affect actual Google Analytics data.')) {
        // Clear localStorage analytics cache
        Object.keys(localStorage).forEach(key => {
          if (key.startsWith('_ga') || key.includes('analytics')) {
            localStorage.removeItem(key);
          }
        });
        
        alert('‚úÖ Analytics cache cleared successfully!');
        location.reload();
      }
    }

    // Track dashboard usage (meta!)
    if (typeof gtag !== 'undefined') {
      gtag('event', 'page_view', {
        page_title: 'Admin Dashboard',
        page_location: '/admin/dashboard',
      });
    }
  </script>

</body>
</html>
